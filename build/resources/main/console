CREATE TABLE contacts (
                      telephoneNumber CHARACTER VARYING(8) PRIMARY KEY NOT NULL UNIQUE,
                      name CHARACTER VARYING(30) NOT NULL,
                      email CHARACTER VARYING(30) NOT NULL
);

CREATE TABLE accounts (
                          id SERIAL PRIMARY KEY NOT NULL UNIQUE,
                          telephoneNumber CHARACTER VARYING(30) REFERENCES contacts(telephoneNumber)  NOT NULL,
                          encodedPassword CHARACTER VARYING(50) NOT NULL
);

CREATE TABLE groups (
                          id SERIAL PRIMARY KEY NOT NULL UNIQUE,
                          name CHARACTER VARYING(30) NOT NULL,
                          creatorId INT REFERENCES accounts(id) NOT NULL
);

CREATE TABLE account_group_info
(
    id SERIAL PRIMARY KEY NOT NULL UNIQUE,
    accountId INT REFERENCES accounts(id) NOT NULL,
    groupId INT REFERENCES groups(id)  NOT NULL,
    accountRole CHARACTER VARYING(30) NOT NULL
);

CREATE TABLE account_contact_list
(
    id SERIAL PRIMARY KEY NOT NULL UNIQUE,
    accountId INT REFERENCES accounts(id) NOT NULL,
    telephoneNumber CHARACTER VARYING(30) REFERENCES contacts(telephoneNumber)  NOT NULL
);

CREATE TABLE expenses
(
    id SERIAL PRIMARY KEY NOT NULL UNIQUE,
    lenderId INT REFERENCES accounts(id) NOT NULL,
    borrowerId INT NOT NULL,
    amount double precision NOT NULL,
    expenseType CHARACTER VARYING(30) NOT NULL,
    localDateTime timestamp NOT NULL,
    currency CHARACTER VARYING(30) NOT NULL
);

INSERT INTO contacts (telephoneNumber, name, email) VALUES ('00000001', 'User#1', 'Email1@gmail.com');
INSERT INTO contacts (telephoneNumber, name, email) VALUES ('00000002', 'User#2', 'Email2@gmail.com');
INSERT INTO contacts (telephoneNumber, name, email) VALUES ('00000003', 'User#3', 'Email3@gmail.com');
INSERT INTO contacts (telephoneNumber, name, email) VALUES ('00000004', 'User#4', 'Email4@gmail.com');

INSERT INTO accounts (telephoneNumber, encodedPassword) VALUES ('00000001', '00000001');
INSERT INTO accounts (telephoneNumber, encodedPassword) VALUES ('00000002', '00000002');
INSERT INTO accounts (telephoneNumber, encodedPassword) VALUES ('00000003', '00000003');

INSERT INTO groups (name, creatorId) VALUES ('Group#1', '1');
INSERT INTO groups (name, creatorId) VALUES ('Group#2', '2');

INSERT INTO account_group_info (accountId, groupId, accountRole) VALUES ('1', '1', 'ADMIN');
INSERT INTO account_group_info (accountId, groupId, accountRole) VALUES ('2', '1', 'USER');
INSERT INTO account_group_info (accountId, groupId, accountRole) VALUES ('3', '1', 'USER');
INSERT INTO account_group_info (accountId, groupId, accountRole) VALUES ('1', '2', 'USER');
INSERT INTO account_group_info (accountId, groupId, accountRole) VALUES ('2', '2', 'ADMIN');
INSERT INTO account_group_info (accountId, groupId, accountRole) VALUES ('3', '2', 'USER');

INSERT INTO account_contact_list (accountId, telephoneNumber) VALUES ('1', '00000001');
INSERT INTO account_contact_list (accountId, telephoneNumber) VALUES ('1', '00000002');
INSERT INTO account_contact_list (accountId, telephoneNumber) VALUES ('1', '00000003');
INSERT INTO account_contact_list (accountId, telephoneNumber) VALUES ('1', '00000004');

INSERT INTO expenses (lenderId, borrowerId, amount, expenseType, localDateTime, currency) VALUES ('1', '2', '100.0',
'USER', '2021-10-01T00:00:00', 'USD');
INSERT INTO expenses (lenderId, borrowerId, amount, expenseType, localDateTime, currency) VALUES ('1', '3', '200.0',
'USER', '2021-10-03T00:00:00', 'USD');
INSERT INTO expenses (lenderId, borrowerId, amount, expenseType, localDateTime, currency) VALUES ('1', '2', '100.0',
'USER', '2021-10-06T00:00:00', 'EUR');
INSERT INTO expenses (lenderId, borrowerId, amount, expenseType, localDateTime, currency) VALUES ('1', '1', '600.0',
'GROUP', '2021-10-05T00:00:00', 'USD');
INSERT INTO expenses (lenderId, borrowerId, amount, expenseType, localDateTime, currency) VALUES ('1', '2', '600.0',
'GROUP', '2021-10-07T10:00:00', 'EUR');

SELECT * FROM accounts WHERE telephoneNumber='00000001' AND encodedPassword='00000001';

SELECT * FROM accounts AS a INNER JOIN Contacts AS c ON a.telephoneNumber = c.telephoneNumber WHERE c.name = 'User#3';

SELECT * FROM contacts WHERE telephoneNumber='00000001'